<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>/</title>
    <link rel="stylesheet" type="text/css" href="/assets/main.css">
  </head>

  <body>
    <div class="container">

      <div class="nav-wrapper">
        <div class="nav">
          
          <div class="nav-home">
            <a href="/index.html">
              Home
            </a>
          </div>
        
          <div class="nav-section">
            <ul>
              <li class="nav-item">
                <a href="/command/run.html">
                  <div class="nav-title">run</div>
                  <div class="nav-description">Run the demo</div>
                </a>
              </li>
              <li class="nav-item">
                <a href="/command/build.html">
                  <div class="nav-title">build</div>
                  <div class="nav-description">Rebuild the source code</div>
                </a>
              </li>
              <li class="nav-item">
                <a href="/command/docs.html">
                  <div class="nav-title">docs</div>
                  <div class="nav-description">Find and generate documentation</div>
                </a>
              </li>
              <li class="nav-item">
                <a href="/command/share.html">
                  <div class="nav-title">share</div>
                  <div class="nav-description">Rsync from the demo to localhost</div>
                </a>
              </li>
              <li class="nav-item">
                <a href="/command/sync.html">
                  <div class="nav-title">sync</div>
                  <div class="nav-description">Rsync from localhost to the demo</div>
                </a>
              </li>
              <li class="nav-item">
                <a href="/command/configure.html">
                  <div class="nav-title">configure</div>
                  <div class="nav-description">Configure the demo</div>
                </a>
              </li>
            </ul>
          </div>

          <!--
          <h6>Configure</h6>
          <div class="nav-section">
            <ul>
              <li class="nav-item">
                <a href="/spec/title.html">
                  <span class="nav-title">title</span> <span class="nav-description">Demo title</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="/spec/run.html">
                  <span class="nav-title">run</span> <span class="nav-description">Run scripts</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="/spec/io.html">
                  <span class="nav-title">io</span> <span class="nav-description">Input and output files</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="/spec/args.html">
                  <span class="nav-title">args</span> <span class="nav-description">Command line arguments</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="/spec/build.html">
                  <span class="nav-title">build</span> <span class="nav-description">Build scripts</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="/spec/data.html">
                  <span class="nav-title">data</span> <span class="nav-description">Included data sets</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="/spec/source.html">
                  <span class="nav-title">source</span> <span class="nav-description">Source code</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="/spec/papers.html">
                  <span class="nav-title">papers</span> <span class="nav-description">Research papers and reports</span>
                </a>
              </li>
            </ul>
          </div>
          -->
        </div>
        
      </div>
      <!-- end nav -->

      <div class="content-wrapper">
        <div class="content">
          <div class="page">
            <div class="guide"><h1>sync</h1>
<p>Rsync from localhost to the demo</p>
<h2>Quick reference</h2>
<p>Access a copy of /root/src from a shared directory outside the demo</p>
<pre><code>$ demo share /root/src
</code></pre>
<p>Sync changes you made in a shared directory so they appear in /root/src in the demo</p>
<pre><code>$ demo sync /root/src
</code></pre>
<p>Access an exact copy of /root/src from a shared directory, deleting files in the shared directory if necessary</p>
<pre><code>$ demo share /root/src --completely
</code></pre>
<p>Sync changes to /root/src completely, deleting files under /root/src in the demo if necessary</p>
<pre><code>$ demo sync /root/src --completely
</code></pre>
<h2>Summary</h2>
<p>When you run 'demo shell' to enter a demo, you select a shared directory whose contents will show up in the demo under /shared. When you change the contents of your shared directory, those changes will also appear in /shared, and vice versa.</p>
<p>'demo share' uses rsync to efficiently copy a directory in the demo (e.g. /root/src) to the same directory in /shared (e.g. /shared/root/src). Use this command to access demo files from your shared directory outside the demo, allowing you to view and change the demo files using your favorite editors and tools.</p>
<p>'demo sync' uses rsync to efficiently copy a directory in /shared (e.g. /shared/root/src) back to the same directory in the demo (e.g. /root/src). Use this command to pull changes you made in your shared directory back into the demo.</p>
<h2>Ways to share and sync</h2>
<p>Share and sync or your current directory</p>
<pre><code>$ demo share
$ demo sync
</code></pre>
<p>Share and sync a specific directory</p>
<pre><code>$ demo share /dir
$ demo sync /dir
</code></pre>
<p>Share and sync a directory completely, allowing files to be deleted (use cautiously)</p>
<pre><code>$ demo share /dir --completely
$ demo sync /dir --completely
</code></pre>
<p>Manually execute the rsync commands produced by</p>
<pre><code>$ demo share /dir --dryrun
$ demo sync /dir --dryrun
</code></pre>
<p>Show rsync output, like files copied</p>
<pre><code>$ demo share /dir --verbose
$ demo sync /dir --verbose
</code></pre>
<h2>Example</h2>
<p>Share a repository of code in /root/src</p>
<pre><code>$ demo share /root/src/repo
</code></pre>
<p>Edit the files in your shared directory outside of the demo. Then pull in the changes</p>
<pre><code>$ demo sync /root/src/repo
</code></pre>
<p>Rebuild and run the default configuration with your changes</p>
<pre><code>$ demo build &amp;&amp; demo run
</code></pre>
<h2>Why this workflow</h2>
<p>The files inside the demo are likely owned by a different user (e.g. root) than the files outside the demo (e.g. your user ID). When you run 'demo share', files are not only efficiently copied, they are also changed so you own them and therefore can modify them outside of the demo. When you run 'demo sync', file ownership is changed to your user in the demo so you can also easily access them in the demo again.</p>
<p>Some tools do this automatically, like the unison tool and most network filesystems. We use rsync because:</p>
<ul>
<li>No setup required</li>
<li>You choose when to sync, as needed</li>
<li>It's stable and easy to understand (e.g. copy file diffs)</li>
</ul>
<p>If you want to keep some directories in the demo automatically in sync with your shared directory, you can write a small script that executes 'demo share' and 'demo sync' in a loop. A script isn't provided because you may have specific needs and preferences for handling syncing errors that happen in the background.</p>
<h2>Help</h2>
<p>View this guide</p>
<pre><code>$ demo share --help
</code></pre>
<p>Same as above</p>
<pre><code>$ demo sync --help
</code></pre>
<h2>More</h2>
<p>Learn more about the rsync command</p>
<pre><code>$ rsync --help
</code></pre>
<p>Read the rsync manual</p>
<pre><code>$ apt-get install man
$ man rsync
</code></pre>
</div>
          </div>
        </div>
      </div>
      
    </div>
  </body>
</html>
