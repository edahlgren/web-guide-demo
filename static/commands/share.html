<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>/</title>
    <link rel="stylesheet" type="text/css" href="/assets/main.css">
  </head>

  <body>
    <div class="container">

      <!-- start nav -->
      <div class="nav-container">
        <div class="nav">

          <table>
            <tbody>
              
              <tr class="title">
                <td></td> <!-- no label -->
                <td><a href="/index.html">Home</a></td>
              </tr>
              
              <tr class="hspace-0.5"></tr>
              
              <tr>
                <td></td> <!-- no label -->
                <td>
                  <a class="section" href="/index.html#layout-of-the-demo">
                    Layout of the demo
                  </a>
                </td>
              </tr>
              <tr>
                <td></td> <!-- no label -->
                <td>
                  <a class="section" href="/index.html#first-time-guide">
                    First time guide
                  </a>
                </td>
              </tr>
              <tr>
                <td></td> <!-- no label -->
                <td>
                  <a class="section" href="/index.html#stuck">
                    Stuck?
                  </a>
                </td>
              </tr>
              
              <tr class="hspace-2"></tr>

              <tr class="title">
                <td></td> <!-- no label -->
                <td>Guides</td>
              </tr>
              
              <tr class="hspace-0.5"></tr>

              <tr>
                <td></td> <!-- no label -->
                <td>
                  <a class="section" href="/guides/run.html">
                    Run the demo
                  </a>
                </td>
              </tr>
              <tr>
                <td></td> <!-- no label -->
                <td>
                  <a class="section" href="/guides/change.html">
                    Change the demo
                  </a>
                </td>
              </tr>
              <tr>
                <td></td> <!-- no label -->
                <td>
                  <a class="section" href="/guides/learn.html">
                    Learn about the demo
                  </a>
                </td>
              </tr>
              <tr>
                <td><span class="label red pr-0.5">A</span></td>
                <td>
                  <a class="section" href="/guides/configure.html">
                    Reconfigure the demo
                  </a>
                </td>
              </tr>
              
              <tr class="hspace-2"></tr>
              
              <tr class="title">
                <td/> <!-- no label -->
                <td>Built-in commands</td>
              </tr>
              
              <tr class="hspace-0.5"></tr>

              <tr>
                <td><span class="label grey-blue pr-0.5">O</span></td>
                <td>
                  <a class="section" href="/commands/shell.html">
                    shell
                  </a>
                </td>
              </tr>
              <tr>
                <td><span class="label grey-blue pr-0.5">O</span></td>
                <td>
                  <a class="section" href="/commands/browse.html">
                    browse
                  </a>
                </td>
              </tr>
              <tr>
                <td><span class="label light-blue pr-0.5">I</span></td>
                <td>
                  <a class="section" href="/commands/run.html">
                    run
                  </a>
                </td>
              </tr>
              <tr>
                <td><span class="label light-blue pr-0.5">I</span></td>
                <td>
                  <a class="section" href="/commands/build.html">
                    build
                  </a>
                </td>
              </tr>
              <tr>
                <td><span class="label light-blue pr-0.5">I</span></td>
                <td>
                  <a class="section" href="/commands/share_sync.html">
                    share/sync
                  </a>
                </td>
              </tr>
              <tr>
                <td><span class="label light-blue pr-0.5">I</span></td>
                <td>
                  <a class="section" href="/commands/check.html">
                    check
                  </a>
                </td>
              </tr>
              <tr class="hspace-2"></tr>
            </tbody>
          </table>

          <hr />
          
          <table class="legend">
            <tr>
              <td><span class="label red">A</span></td>
              <td><span class="pl-0.25">=</span></td>
              <td>Advanced</td>
            </tr>
            <tr>
              <td><span class="label grey-blue">O</span></td>
              <td><span class="pl-0.25">=</span></td>
              <td>Run outside the demo</td>
            </tr>
            <tr>
              <td><span class="label light-blue">I</span></td>
              <td><span class="pl-0.25">=</span></td>
              <td>Run inside the demo</td>
            </tr>
          </table>
        
        </div>
      </div>
      <!-- end nav -->

      <!-- start doc -->
      <div class="guide"><h1>share</h1>
<p>Rsync from the demo to localhost</p>
<h2>Quick reference</h2>
<p>Access a copy of /root/src from a shared directory outside the demo</p>
<pre><code>$ demo share /root/src
</code></pre>
<p>Sync changes you made in a shared directory so they appear in /root/src in the demo</p>
<pre><code>$ demo sync /root/src
</code></pre>
<p>Access an exact copy of /root/src from a shared directory, deleting files in the shared directory if necessary</p>
<pre><code>$ demo share /root/src --completely
</code></pre>
<p>Sync changes to /root/src completely, deleting files under /root/src in the demo if necessary</p>
<pre><code>$ demo sync /root/src --completely
</code></pre>
<h2>Summary</h2>
<p>When you run 'demo shell' to enter a demo, you select a shared directory whose contents will show up in the demo under /shared. When you change the contents of your shared directory, those changes will also appear in /shared, and vice versa.</p>
<p>'demo share' uses rsync to efficiently copy a directory in the demo (e.g. /root/src) to the same directory in /shared (e.g. /shared/root/src). Use this command to access demo files from your shared directory outside the demo, allowing you to view and change the demo files using your favorite editors and tools.</p>
<p>'demo sync' uses rsync to efficiently copy a directory in /shared (e.g. /shared/root/src) back to the same directory in the demo (e.g. /root/src). Use this command to pull changes you made in your shared directory back into the demo.</p>
<h2>Ways to share and sync</h2>
<p>Share and sync or your current directory</p>
<pre><code>$ demo share
$ demo sync
</code></pre>
<p>Share and sync a specific directory</p>
<pre><code>$ demo share /dir
$ demo sync /dir
</code></pre>
<p>Share and sync a directory completely, allowing files to be deleted (use cautiously)</p>
<pre><code>$ demo share /dir --completely
$ demo sync /dir --completely
</code></pre>
<p>Manually execute the rsync commands produced by</p>
<pre><code>$ demo share /dir --dryrun
$ demo sync /dir --dryrun
</code></pre>
<p>Show rsync output, like files copied</p>
<pre><code>$ demo share /dir --verbose
$ demo sync /dir --verbose
</code></pre>
<h2>Example</h2>
<p>Share a repository of code in /root/src</p>
<pre><code>$ demo share /root/src/repo
</code></pre>
<p>Edit the files in your shared directory outside of the demo. Then pull in the changes</p>
<pre><code>$ demo sync /root/src/repo
</code></pre>
<p>Rebuild and run the default configuration with your changes</p>
<pre><code>$ demo build &amp;&amp; demo run
</code></pre>
<h2>Why this workflow</h2>
<p>The files inside the demo are likely owned by a different user (e.g. root) than the files outside the demo (e.g. your user ID). When you run 'demo share', files are not only efficiently copied, they are also changed so you own them and therefore can modify them outside of the demo. When you run 'demo sync', file ownership is changed to your user in the demo so you can also easily access them in the demo again.</p>
<p>Some tools do this automatically, like the unison tool and most network filesystems. We use rsync because:</p>
<ul>
<li>No setup required</li>
<li>You choose when to sync, as needed</li>
<li>It's stable and easy to understand (e.g. copy file diffs)</li>
</ul>
<p>If you want to keep some directories in the demo automatically in sync with your shared directory, you can write a small script that executes 'demo share' and 'demo sync' in a loop. A script isn't provided because you may have specific needs and preferences for handling syncing errors that happen in the background.</p>
<h2>Help</h2>
<p>View this guide</p>
<pre><code>$ demo share --help
</code></pre>
<p>Same as above</p>
<pre><code>$ demo sync --help
</code></pre>
<h2>More</h2>
<p>Learn more about the rsync command</p>
<pre><code>$ rsync --help
</code></pre>
<p>Read the rsync manual</p>
<pre><code>$ apt-get install man
$ man rsync
</code></pre>
</div>
      <!-- end doc -->

    </div>
  </body>
  
  <script type="text/javascript" src="/assets/main.js"></script>
</html>
